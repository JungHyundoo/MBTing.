<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회원관리</title>
 <!-- Chart.js CDN 추가 -->
 <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
 <!-- Font Awesome CDN 추가 -->
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
 <link rel="preconnect" href="https://fonts.googleapis.com">
 <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
 <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" rel="stylesheet">
 
<style>
 @font-face {
 font-family: 'TheJamsil5Bold';
 src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2302_01@1.0/TheJamsil5Bold.woff2') format('woff2');
 font-weight: 700;
 font-style: normal;
 }

 html, body {
     margin: 0;
     padding: 0;
     
 }

 #wrap {
     width: 1580px;
     height: 1600px;
     margin: auto;
     display: flex;
 }

 .left-area {
     width: 200px;
     height: 2300px;
     border-right: 2px solid #FCD19E;
     display: flex;
     flex-direction: column;
     align-items: center;
     padding-top: 20px;
     font-family: 'TheJamsil5Bold';
 }

 #logo {
     font-size: 24px;
     color: #e64a19; /* 주황색 */
 }

 #content-menubar table {
     width: 100%;
     border-collapse: collapse;
 }

 #content-menubar th {
     padding: 15px;
     text-align: center;
     font-size: 16px;
     cursor: pointer;
     position: relative;
 }

 #content-menubar th:hover {
     background-color: #ff9800; /* 주황색 (Hover 시 조금 더 진한 색으로) */
 }

 .menu-icon {
     position: absolute;
     left: 10px;
     top: 50%;
     transform: translateY(-50%);
     font-size: 18px;
 }

 /* 메뉴바 색상 */
 #content-menubar th:nth-child(1) {
     color: #d32f2f;
 }
     
 .right-area {
     align-content: right;
     background-color: #FCD19E;
     height: 100px;
 }
 #logo {
     display: inline;
 }
 #icon1 {
     width: 100px;
     height: 60px;
     padding-right: 30px;
     margin-top: 20px;
 }
 #icon2 {
     width: 80px;
     height: 80px;
     padding-right: 10px;
     margin-top: 10px;
 }
 #content-menubar {
     width: 200px;
     height: 700px;
     margin-top: 30px;
 }


/* 회원관리 스타일 */
 #member-table{
    width: 1000px;
    margin-left: 100px;
    text-align: center;
 }
 #searchForm{
    width: 450px;
    margin: auto;
    margin-top: 100px;
 }
.btn-primary{
   margin-left: 1000px;;
   margin-bottom: 30px;
}
.checkbox{
    margin: auto;
    display: block;
}
</style>
</head>
<body>
 <div class="right-area"> <!-- 오른쪽-->
     <img id="icon2" align="right" src="https://visualpharm.com/assets/225/Male%20User-595b40b85ba036ed117dc5a0.svg" alt="">
     <img id="icon1" align="right" src="https://cdn-icons-png.flaticon.com/512/386/386605.png" alt="">
 </div>
 <div id="wrap">

     	<div>

	</div>
	<script>
	    let i = document.getElementById("myProfile");

        // i.style.cssText = "border-top : 5px solid pink"
	    
    </script>

	<div id="profile-outer">

        <div class="profile-intro">
            사용자 프로필
        </div>
	
		<form id="mypage-form" 
		  action="update.me"
		  method="post"
		 enctype="multipart/form-data"
         style="border: 1px solid pink; padding: 20px; border-radius: 5px;">
		
			<!--
				마이페이지에서 보여져야 하는 것들
				아이디, 이름, 전화번호, 이메일, 주소, 취미
			-->

            <div class="left-profile">

                <table border="0px" style="table-layout: fixed;">

                    <tr>
                        <td style="display: flex; height: 40px; line-height: 40px; font-size: 18px; font-weight: bold;"> 
                            기본 정보 (수정 불가) 
                            <div style="border: 1px solid gray; width: 135px; height: 0px; margin-top: 20px; margin-left: 20px;"></div></td>
                    </tr>
                                        
                    <tr>
                        <td class="profile-title">이름</td>
                    </tr>
                    <tr>
                        <td>
                        <input class="profile-content" type="text" name="userName" required 
                                value="${sessionScope.loginMember.userName}" disabled>
                    </td>
                    </tr>

                    <tr>
                        <td class="profile-title">나이</td>
                    </tr>
                    <tr>
                        <td>
                            <input class="profile-content" type="text" name="age" 
                            value="${sessionScope.loginMember.age}" disabled>
                        </td>
                    </tr>
                   
                    <tr>
                        <td class="profile-title">성별</td>
                    </tr>
                    <td>
                        <input class="profile-content" type="text" name="gender" 
                        value="${sessionScope.loginMember.gender}" disabled>
                    </td>

                    <tr>
                        <td class="profile-title">키</td>
                    </tr>
                    <td>
                        <input class="profile-content" type="text" name="height" 
                        value="${sessionScope.loginMember.height}" disabled>
                    </td>

                    <tr>
                        <td class="profile-title">가입일</td>
                    </tr>
                    <tr>
                        <td>
                            <input class="profile-content" type="text" name="phone" placeholder="- 포함해서 입력해주세요"
                            value="${sessionScope.loginMember.enrollDate}" disabled>
                        </td>
                    </tr>

                    <tr>
                        <td style="display: flex; height: 40px; line-height: 40px; font-size: 18px; font-weight: bold; margin-top: 20px; "> 
                            부가 정보 (수정 가능)
                            <div style="border: 1px solid gray; width: 130px; height: 0px; margin-top: 20px; margin-left: 20px;"></div></td>
                    </tr>
                    
                    <tr>
                        <td class="profile-title">휴대폰</td>
                    </tr>
                    <td>
                        <input class="profile-content" type="text" name="phone" placeholder="- 포함해서 입력해주세요" style="caret-color: auto;"
                        value="${sessionScope.loginMember.phone}">
                    </td>

                    <tr>
                        <td class="profile-title">소개</td>
                    </tr>
                    <tr>
                        <td>
                            <textarea style="caret-color: auto;" placeholder="사용자의 소개 내용을 입력해 주세요." name="introduce">${sessionScope.loginMember.introduce}</textarea>
                        </td>
                    </tr>
                    
                    <tr>
                        <td class="profile-title"> 거주지</td>
                    </tr>
                    <tr>
                        <td>
                            <select name="address" id= "address">
                            	<option value=null>== 주소선택 ==</option>
	                            <option value="서울특별시">서울특별시</option>
							    <option value="부산광역시">부산광역시</option>
							    <option value="대구광역시">대구광역시</option>
							    <option value="인천광역시">인천광역시</option>
							    <option value="광주광역시">광주광역시</option>
							    <option value="대전광역시">대전광역시</option>
							    <option value="울산광역시">울산광역시</option>
							    <option value="세종특별시">세종특별시</option>
							    <option value="경기도">경기도</option>
							    <option value="강원도">강원도</option>
							    <option value="충청북도">충청북도</option>
							    <option value="충청남도">충청남도</option>
							    <option value="전라북도">전라북도</option>
							    <option value="전라남도">전라남도</option>
							    <option value="경상북도">경상북도</option>
								<option value="경상남도">경상남도</option>
								<option id="jeju" value="제주도">제주도</option>
                            </select>
                        </td>
                    </tr>
                    <script>
                    $(function(){
                    	
                    // 주소 기본값 설정
	                    if("${sessionScope.loginMember.address}" != null){
	                    	console.log($("#address option[value='${sessionScope.loginMember.address}']"))
	                    	$("#address option[value='${sessionScope.loginMember.address}']").prop("selected", true)
	                    	
	                    }
                    	
                    })
                    
                    </script>
                    
                    <tr>
                        <td class="profile-title">MBTI</td>
                    </tr>
                    <tr>
                        <td>
                            <input class="profile-content" type="text" name="phone" placeholder="- 포함해서 입력해주세요"
                            value="${sessionScope.loginMember.mbti}" disabled>
                        </td>
                    </tr>
                                      
                    <tr>
                        <td class="profile-title">MBTI 별명</td>
                    </tr>
                    <tr>
                        <td>
                            <input class="profile-content" type="text" name="phone" placeholder="- 포함해서 입력해주세요"
                            value="${sessionScope.loginMember.mbtiNick}" disabled>
                        </td>
                        <td>
                            <button id="mbti-test" type="button" onclick="location.href='mbtiTest.mb'">내 성향 검사</button>
                        </td>
                    </tr>

        
                    
                    
               
                </table>
            </div>

            <div class="right-profile">
                <div class="profile-title" style="line-height: 30px;">
                    미리보기
                </div>

                <div class="right-profile-content">
                    
                    <div class="right-profile-header">
    
                        <div class="profile-img-box">
                            <img class="profile-img" src="${pageContext.request.contextPath}${sessionScope.loginMember.profileImg}" alt="" />
                        </div>
                        <div id="email">
                            ${sessionScope.loginMember.email}
                        </div>
                        
                    </div>

                    <!-- 회원 정보 변경 시 DB로 부터 수정할 회원을 지정하기 위해 로그인 유저의 EMAIL 정보 담아 둘 input -->
                    <input type="hidden" name="email" value="${sessionScope.loginMember.email}" />
                    <div class="profle-img-title">
                        <div id="name"> ${sessionScope.loginMember.userName}</div>
                        <div id="mbtiNick">${sessionScope.loginMember.mbtiNick} / ${sessionScope.loginMember.mbti}</div>
                        
                        <div class="line"></div>

                        <div style="font-weight: bold; margin-top: 20px;" >소개</div>
                        <div style="border: 1px solid pink; border-radius: 5px; margin-bottom: 20px;" >
                            <textarea placeholder="사용자의 소개 내용을 입력해 주세요." style="background-color: white;" readonly disabled>${sessionScope.loginMember.introduce}</textarea>
                        </div>

                        <div>
                            <button id="change-profile" type="button">프로필 이미지 변경</button>
                            <input type="file" id="upfile" name="reupfile" style="display: none;">
                            <input type="hidden" id="oldfile" name="profileImg" style="display: none;" value="${sessionScope.loginMember.profileImg}">
                        </div>
                    </div>
                    
                </div>

                <div class="final-button">
                    <button id="final-button1" type="button" data-toggle="modal" data-target="#changePwd">비밀번호 변경</button>
                    <button id="final-button2" type="submit">적용 </button>
                </div>  
            </div>


            <!-- 프로필 이미지 등록 미리보기용 스크립트 -->
            <script>
                

                $("#change-profile").click(function(){
                        
                        $("#upfile").click();	
                });
            
                $("#upfile").on("change", function(event) {
                    console.log($("#upfile").val());

                    var upfile = $("#upfile")
                   
                    var file = event.target.files[0];

                    var reader = new FileReader(); 
                    reader.onload = function(e) {

                        $(".profile-img").attr("src", e.target.result);
                    }

                    reader.readAsDataURL(file);
                });
            </script>


		</form>
	</div>
  


</div>

</body>
</html>
    